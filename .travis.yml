sudo: required
dist: trusty
language: android
node_js:
    4.2.3
android:
    components:
        - platform-tools
        - tools
        - build-tools-23.0.2
        - android-19
        - extra-android-support
        - extra-android-m2repository
        - sys-img-armeabi-v7a-android-19

before_script:
    - npm install -g grunt-cli
    - npm install
    - echo no | android create avd --force -n Arm19 -t android-19 -b armeabi-v7a -c 12M
    - emulator -avd Arm19 -no-skin -no-audio -no-window &
    - android-wait-for-emulator
script:
    - grunt default
    - node --version
    - npm --version
    - npm install nativescript -g
    - grunt buildOnlyTestsApp --platform=Android --modulesPath=./bin/dist/tns-core-modules-1.7.0.tgz --emuPId=.*emulator.* --avd=Api19 --showEmu=false
    - grunt runOnlyTestsApp --platform=Android --modulesPath=./bin/dist/tns-core-modules-1.7.0.tgz --emuPId=.*emulator.* --avd=Api19 --showEmu=false

